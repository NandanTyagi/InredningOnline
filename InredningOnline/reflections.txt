WU 20 Inlämningsuppgift: InredningOnline

STRUKTUR

    Project klassens fält består av:

        int Id ()
        string Name
        int DesignerId (Projektet håller reda på vilken Designer den tillhör)
        Designer Designer
        IEnumerable<Material> Materials 

    Project innehåller en metod:
        GetTotalCost()(Summerar materialkostnaden för projektet)

    Material klassens fält:

        int Id
        int ProjectId (Materialen håller reda på vilken projekt de tillhör)
        string Namn
        string Supplier
        decimal Price
        string Details (Tar emot länkadress i form av www.xxxxxxx.xxx)

    Designer klassens fält:

        int Id
        string Name
        string Email
        bool IsAdmin (Inköpschefen är admin och kan se och redigera allas projekt.)

    ProjectsController.cs

        IActionresult Index()(MyProjects)
        IActionresult AllProjects()(endast Admin har tillgång)
        IActionresult CreateProject()
        IActionresult CreateProject(Project project, Material material)[HttpPost]
        IActionresult EditMateral(int Id)
        IActionresult EditMateral(Material material)[HttpPost]
        IActionresult AddMaterial(int Id)
        IActionresult AddMaterial(Material material)[HttpPost]

    ProjectsViewModel.cs

        Fält:
        IEnumerable<Project> Projects
        IEnumerable<Designer> Designers
        IEnumerable<Material> Materials
        IProjectRepo Repo
        Project Project
        Designer Designer
        Material Material

        Metoder:
        decimal GetAverageCost() (Av alla Project)
        decimal GetAverageCost(int designerId)
        decimal GetTotalCost()
        decimal GetTotalCost(int designerId)
        Designer GetDesignerById(int id)
      
    Views:
        Projects/Index
        Projects/CreateProject
        Projects/AllProjects
        Projects/EditMateral
        Projects/AddMaterial

    Partial views:
        _Layout.cshtml (Från ASP.Net)
        _LoginPartial.cshtml (Från Identity core för inloggning i naven)
        _ProjectCard.cshtml

    Jag har valt att endast ha en "Controller" och "ViewModel" klass som innehåller alla actions respektive View logic/data.
    Jag hade en controller och ViewModel för varje sida först men det blev så bökigt och onödigt komplicerat så jag minskade
    till endast en av varje.

SÄKERHET

    Jag har använt Identity Core's inbyggda funktionalitet för log-in/-out och registrering
    samt dess egenskaper UserManager och SignInManager för att säkerställa att endast inloggade användare har åtkomst till project sidorna.
    Denna funktionalitet har aktiverats genom att åberopa UseAuthentication() och UseAuthorization() i Startup klassen. 

ANVÄNDARE

    Det finns 3 st "Designers" hårdkodade i AppDbContext. En av dem som är inköpschefen har variabeln IsAdmin satt till true och de andra två, som inte
    har befogenheter att se och redigera alla projekt, har variabeln satt till "false".
    I view'en "AllProjects" har jag en If-sats som kontrollerar denna variabel och ger eller nekar tillgången till sidan beroende på variabelns värde.

REFLEKTION

    Här fick jag en introduktion till hur MVC, Middleware, Dependency Injection och Repository designemönster fungerar.
    Jag fick även lära mig mycket om Databas koppling och ORM hantering i Entity Framework och sist men inte minst användarautentisering via Identity Core.
    Det har verkligen varit mycket att ta in.
    Jag har fått ett ok grepp om hur MVC, Middleware och Repository pattern funkar samt hur Entity Framework Core fungerar men jag känner mig
    ganska otrygg och osäker när det kommer till Dependency Injection och Identity Core.
    Hela DI konceptet känns flummigt, jag har förståt det i teorin men det har inte riktigt klarnat för mig hur det fungerar i praktiken.
    Identeity Core är så stort så jag nöjer mig med att bara utnyttja de delar jag fick intro till i den här modulen. Jag har dock ingen förståelse för hur det fungerar "under the hood", men det kommer i framtiden hoppas jag.

    För den här uppgiften bytte jag från Visual Studio 2019 till VS Code och jag kan konstatera att jag kommer att fortsätta använda VS Code
    i framtiden då det känns mycket agilare och skönare helt enkelt.

    När det kommer till testning hade jag svårt att implimentera testning för AppDbContext, jag testade MockRepository istället där jag testar beräkningarna.
    Att testa Identity Core och att rätt användare blir inloggad känner jag i nuläget är bort om min kunskaps nivå.

    Överlag känner jag att efter den här modulen kan jag använda ASP.NET för att bygga enklare dynamiska applikationer. Det känns riktigt bra! 